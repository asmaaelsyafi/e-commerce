<section class="bg-main-light shadow p-2 my-5">
    <h1 class="h2 text-main">Register Now:</h1>
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-2">
            <label for="name">Name</label>
            <input type="text" id="name" class="form-control" formControlName="name"
            [ngClass]="{
            'is-valid': !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty ),
            'is-invalid': registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty )
            }"
            >
            @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty )) {
                <div class="alert alert-danger py-2 my-0">
                    @if (registerForm.get('name')?.getError('required')) {
                        <p> Name is required</p>
                    }
                    @else if (registerForm.get('name')?.getError('minlength')) {
                        <p>min length is 3 char</p>
                    }
                    @else if (registerForm.get('name')?.getError('maxlength')) {
                        <p>max length is 20</p>
                    }
                   
                </div>
            }
           
        </div>
        <div class="my-2">
            <label for="email">email</label>
            <input type="email" id="email" class="form-control" formControlName="email"
            [ngClass]="{
                'is-valid': !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty ),
                'is-invalid': registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty )
                }"
            >
            @if (registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)) {
                <div class="alert alert-danger py-2 my-0">
                    @if (registerForm.get('email')?.getError('required')) {
                        <p> email is required</p>
                    }
                    @else if (registerForm.get('email')?.getError('email')) {
                        <p>Email is Invalid</p>
                    }
                    
                   
                </div>
            }
        </div>
        <div class="my-2">
            <label for="password">password</label>
            <input type="password" id="password" class="form-control" formControlName="password"
            [ngClass]="{
                'is-valid': !registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty ),
                'is-invalid': registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty )
                }"
            >
            @if (registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)) {
                <div class="alert alert-danger py-2 my-0">
                    @if (registerForm.get('password')?.getError('required')) {
                        <p> password is required</p>
                    }
                    @else if (registerForm.get('password')?.getError('pattern')) {
                        <p>Enter min 6 char or numor symbol</p>
                    }
                   
                   
                </div>
            }
        </div>
        <div class="my-2">
            <label for="rePassword">rePassword</label>
            <input type="password" id="rePassword" class="form-control" formControlName="rePassword"
            [ngClass]="{
                'is-valid': !registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty ),
                'is-invalid': registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty )
                }"
            >
            @if (registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)) {
                <p class="alert alert-danger py-2 my-0">password and rePassword not match</p>
            }
        </div>
        <div class="my-2">
            <label for="phone">phone</label>
            <input type="tel" id="phone" class="form-control" formControlName="phone"
            [ngClass]="{
                'is-valid': !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty ),
                'is-invalid': registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty )
                }"
            >
            @if (registerForm.get('phone')?.errors && registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty) {
                <div>
                    @if (registerForm.get('phone')?.getError('required')) {
                        <p class="alert alert-danger py-2 my-0"> phone is required</p>
                    }
                    @else if (registerForm.get('phone')?.getError('pattern')) {
                        <p class="alert alert-danger py-2 my-0">Enter valid phone number</p>
                    }
                    
                   
                </div>
            }
        </div>
        <!-- [disabled]="registerForm.invalid || isLoading" -->
        <button  type="submit" class="btn-main ms-auto d-block">
            @if(isLoading){
                <i class="fa-solid fa-spinner fa-spin"></i>

            }
            Register</button>
        @if (msgErr) {
            <p class="alert alert-danger py-2 my-0">{{msgErr}}</p>
        }
        @if (msgSuccess) {
            <p class="alert alert-success py-2 my-0">{{msgSuccess}}</p>
        }

    </form>
</section>